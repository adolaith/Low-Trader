package com.ado.trader.input;

import com.ado.trader.map.EntityLayer;
import com.ado.trader.map.Map;
import com.ado.trader.placement.PlacementManager;
import com.badlogic.gdx.Input.Buttons;
import com.badlogic.gdx.graphics.OrthographicCamera;
import com.badlogic.gdx.scenes.scene2d.Stage;

public class GameInput extends InputHandler {
	

	public GameInput(Stage stage, Map map, PlacementManager plManager, OrthographicCamera camera) {
		super(stage, map, plManager, camera);
		// TODO Auto-generated constructor stub
	}

	public boolean touchUp(int screenX, int screenY, int pointer, int button) {
		super.touchUp(screenX, screenY, pointer, button);
		
		if(button == Buttons.LEFT){
			EntityLayer layer = map.getEntityLayer();
			
			if(layer.isOccupied((int)mapClicked.x, (int)mapClicked.y, map.currentLayer)){		//entity selection
				game.setCurrentlySelected(game.getWorld().getEntity(layer.map[(int)mapClicked.x][(int)mapClicked.y][map.currentLayer])); 
				return true;
			}
			
			game.setCurrentlySelected(null);
			return true;
		}else if(button == Buttons.RIGHT){
			
			if(plManager.getPlacementSelection()!=null){
				plManager.resetSelection();
				return true;
			}
			
			if(game.getGui().rightClickAction()) return true;
			
		}
		
		if(plManager.handleClick(mapClicked, this)) return true;
		
		return false;
	}
}
